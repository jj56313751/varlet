var Y=Object.defineProperty;var z=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var A=(e,n,t)=>n in e?Y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,u=(e,n)=>{for(var t in n||(n={}))J.call(n,t)&&A(e,t,n[t]);if(z)for(var t of z(n))R.call(n,t)&&A(e,t,n[t]);return e};import{d as U,r as Z,b as h,y as N,x as Q,e as _,w as W,v as X,o as b,c as x,a as w,p as y,G as k,l as O,h as V,n as L,m as j,t as G,i as S,j as C,H as $,T as ee,I as ne,q as I,J as te,K as oe}from"./vendor.49f89f0d.js";import{p as B,L as ae}from"./index.9e43ebc8.js";import{I as ie}from"./index.8ccfa1b5.js";import{u as se}from"./zIndex.8c13fd4c.js";import{p as P,h as re,u as le,m as ce}from"./components.38f1d302.js";import{_ as D}from"./elevation.229458c1.js";import{c as de}from"./index.48ee5316.js";import{e as ue,c as fe,i as pe,t as M}from"./shared.506a394a.js";import{u as me}from"./lock.c5636ec8.js";function ve(e){return["top","center","bottom"].includes(e)}function ye(e){return T.includes(e)}const H={type:{type:String,validator:ye},position:{type:String,default:"top",validator:ve},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:P(B,"type"),loadingSize:P(B,"size"),lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:String,default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:{type:Function,default:()=>{}},onOpened:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}},onClosed:{type:Function,default:()=>{}},"onUpdate:show":{type:Function},_update:{type:String}};const{n:v,classes:q}=re("snackbar"),be={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},ge=U({name:"VarSnackbarCore",components:{VarLoading:ae,VarIcon:ie},props:H,setup(e){const n=Z(null),{zIndex:t}=se(()=>e.show,1);me(e,"show","lockScroll");const o=h(()=>{const{position:a,vertical:c,type:d}=e;return q(v("wrapper"),v(`wrapper-${a}`),"var-elevation--4",[c,v("vertical"),""],[d&&T.includes(d),v(`wrapper-${d}`),""])}),i=h(()=>e.type==="loading"||e.forbidClick),s=h(()=>e.type?be[e.type]:""),r=()=>{n.value=setTimeout(()=>{var a;e.type!=="loading"&&((a=e["onUpdate:show"])==null||a.call(e,!1))},e.duration)};return N(()=>e.show,a=>{var c,d;a?((c=e.onOpen)==null||c.call(e),r()):a===!1&&(clearTimeout(n.value),(d=e.onClose)==null||d.call(e))}),N(()=>e._update,()=>{clearTimeout(n.value),r()}),Q(()=>{var a;e.show&&((a=e.onOpen)==null||a.call(e),r())}),{n:v,classes:q,zIndex:t,snackbarClass:o,iconName:s,isForbidClick:i}}});function ke(e,n,t,o,i,s){const r=_("var-icon"),a=_("var-loading");return W((b(),x("div",{class:y(e.n()),style:L({pointerEvents:e.isForbidClick?"auto":"none",zIndex:e.zIndex})},[w("div",{class:y(e.snackbarClass),style:L({zIndex:e.zIndex})},[w("div",{class:y([e.n("content"),e.contentClass])},[k(e.$slots,"default",{},()=>[j(G(e.content),1)])],2),w("div",{class:y(e.n("action"))},[e.iconName?(b(),O(r,{key:0,name:e.iconName},null,8,["name"])):V("v-if",!0),e.type==="loading"?(b(),O(a,{key:1,type:e.loadingType,size:e.loadingSize},null,8,["type","size"])):V("v-if",!0),k(e.$slots,"action")],2)],6)],6)),[[X,e.show]])}var K=D(ge,[["render",ke]]);const Se=U({name:"VarSnackbar",components:{VarSnackbarCore:K},props:H,setup(){const{disabled:e}=le();return{disabled:e}}});function he(e,n,t,o,i,s){const r=_("var-snackbar-core");return b(),O(ne,{to:e.teleport,disabled:e.disabled},[S(ee,{name:"var-snackbar-fade",onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:C(()=>[S(r,$(e.$props,{class:"var-snackbar-transition"}),{action:C(()=>[k(e.$slots,"action")]),default:C(()=>[k(e.$slots,"default",{},()=>[j(G(e.content),1)])]),_:3},16)]),_:3},8,["onAfterEnter","onAfterLeave"])],8,["to","disabled"])}var f=D(Se,[["render",he]]);function we(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!te(e)}const T=["loading","success","warning","info","error"];let F=0,E=!1,g,p=!1,l=I([]);const Ce={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}},_e={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},Oe={setup(){return()=>{const e=l.map(({id:t,reactiveSnackOptions:o,_update:i})=>{const s=document.querySelector(".var-transition-group");o.forbidClick||o.type==="loading"?s.classList.add("var-pointer-auto"):s.classList.remove("var-pointer-auto"),p&&(o.position="top");const a=u({position:p?"relative":"absolute"},ze(o.position));return S(K,$(o,{key:t,style:a,"data-id":t,_update:i,show:o.show,"onUpdate:show":c=>o.show=c}),null)}),n=de.zIndex;return S(oe,$(_e,{style:{zIndex:n},onAfterEnter:$e,onAfterLeave:Ee}),we(e)?e:{default:()=>[e]})}}},m=function(e){const n=fe(e)||pe(e)?{content:String(e)}:e,t=I(u(u({},Ce),n));t.show=!0,E||(E=!0,g=ce(Oe).unmountInstance);const{length:o}=l,i={id:F++,reactiveSnackOptions:t};if(o===0||p)Ie(i);else{const s=`update-${F}`;Te(t,s)}return{clear(){!p&&l.length?l[0].reactiveSnackOptions.show=!1:t.show=!1}}};T.forEach(e=>{m[e]=n=>(ue(n)?n.type=e:n={content:n,type:e},m(n))});m.install=function(e){e.component(f.name,f)};m.allowMultiple=function(e=!1){e!==p&&(l.forEach(n=>{n.reactiveSnackOptions.show=!1}),p=e)};m.clear=function(){l.forEach(e=>{e.reactiveSnackOptions.show=!1})};m.Component=f;function $e(e){var o,i;const n=e.getAttribute("data-id"),t=l.find(s=>s.id===M(n));t&&((i=(o=t.reactiveSnackOptions).onOpened)==null||i.call(o))}function Ee(e){var i,s;e.parentElement&&e.parentElement.classList.remove("var-pointer-auto");const n=e.getAttribute("data-id"),t=l.find(r=>r.id===M(n));t&&(t.animationEnd=!0,(s=(i=t.reactiveSnackOptions).onClosed)==null||s.call(i)),l.every(r=>r.animationEnd)&&(g==null||g(),l=I([]),E=!1)}function Ie(e){l.push(e)}function Te(e,n){const[t]=l;t.reactiveSnackOptions=u(u({},t.reactiveSnackOptions),e),t._update=n}function ze(e="top"){return e==="bottom"?{[e]:"5%"}:{top:e==="top"?"5%":"45%"}}f.install=function(e){e.component(f.name,f)};export{m as S};
